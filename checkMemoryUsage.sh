#!/bin/bash

ssh -n mtprd01         "ps -eo vsz,args |perl -ne 'my(\$m,\$l,\$t);if(/\d+ moses /){(\$m,\$l,\$t)=m,^ *(\d+) .+/local/cms/([\w\-]+?)/(\w+)/\w+\.ini,}elsif(m,\w+/moses,){(\$m,\$t,\$l)=m,^ *(\d+) (?:/usr/local/bin/)?(sh|perl) -.+(fy\d\d_[\w\-]+)(?:_moses| -),}elsif(m,\w+/java,){(\$m,\$t)=m,^ *(\d+) .+?/(perl|java),;\$l=\"fy13_EN-JP_*\"};\$m=int(\$m/1024);\$m=\" \".\$m while length \$m<4;print\"\$l\tmtprd01\t\$t\t\${m}MB\n\"if(/\d+ moses /||m,\w+/(moses|java),)'"
ssh -n mtprd02         "ps -eo vsz,args |perl -ne 'my(\$m,\$l,\$t);if(/\d+ moses /){(\$m,\$l,\$t)=m,^ *(\d+) .+/local/cms/([\w\-]+?)/(\w+)/\w+\.ini,}elsif(m,\w+/moses,){(\$m,\$t,\$l)=m,^ *(\d+) (?:/usr/local/bin/)?(sh|perl) -.+(fy\d\d_[\w\-]+)(?:_moses| -),}elsif(m,\w+/java,){(\$m,\$t)=m,^ *(\d+) .+?/(perl|java),;\$l=\"fy13_EN-JP_*\"};\$m=int(\$m/1024);\$m=\" \".\$m while length \$m<4;print\"\$l\tmtprd02\t\$t\t\${m}MB\n\"if(/\d+ moses /||m,\w+/(moses|java),)'"
ssh -n mtprd03         "ps -eo vsz,args |perl -ne 'my(\$m,\$l,\$t);if(/\d+ moses /){(\$m,\$l,\$t)=m,^ *(\d+) .+/local/cms/([\w\-]+?)/(\w+)/\w+\.ini,}elsif(m,\w+/moses,){(\$m,\$t,\$l)=m,^ *(\d+) (?:/usr/local/bin/)?(sh|perl) -.+(fy\d\d_[\w\-]+)(?:_moses| -),}elsif(m,\w+/java,){(\$m,\$t)=m,^ *(\d+) .+?/(perl|java),;\$l=\"fy13_EN-JP_*\"};\$m=int(\$m/1024);\$m=\" \".\$m while length \$m<4;print\"\$l\tmtprd03\t\$t\t\${m}MB\n\"if(/\d+ moses /||m,\w+/(moses|java),)'"
ssh -n mtprd04         "ps -eo vsz,args |perl -ne 'my(\$m,\$l,\$t);if(/\d+ moses /){(\$m,\$l,\$t)=m,^ *(\d+) .+/local/cms/([\w\-]+?)/(\w+)/\w+\.ini,}elsif(m,\w+/moses,){(\$m,\$t,\$l)=m,^ *(\d+) (?:/usr/local/bin/)?(sh|perl) -.+(fy\d\d_[\w\-]+)(?:_moses| -),}elsif(m,\w+/java,){(\$m,\$t)=m,^ *(\d+) .+?/(perl|java),;\$l=\"fy13_EN-JP_*\"};\$m=int(\$m/1024);\$m=\" \".\$m while length \$m<4;print\"\$l\tmtprd04\t\$t\t\${m}MB\n\"if(/\d+ moses /||m,\w+/(moses|java),)'"
ssh -n mtprd05         "ps -eo vsz,args |perl -ne 'my(\$m,\$l,\$t);if(/\d+ moses /){(\$m,\$l,\$t)=m,^ *(\d+) .+/local/cms/([\w\-]+?)/(\w+)/\w+\.ini,}elsif(m,\w+/moses,){(\$m,\$t,\$l)=m,^ *(\d+) (?:/usr/local/bin/)?(sh|perl) -.+(fy\d\d_[\w\-]+)(?:_moses| -),}elsif(m,\w+/java,){(\$m,\$t)=m,^ *(\d+) .+?/(perl|java),;\$l=\"fy13_EN-JP_*\"};\$m=int(\$m/1024);\$m=\" \".\$m while length \$m<4;print\"\$l\tmtprd05\t\$t\t\${m}MB\n\"if(/\d+ moses /||m,\w+/(moses|java),)'"
ssh -n mtprd06         "ps -eo vsz,args |perl -ne 'my(\$m,\$l,\$t);if(/\d+ moses /){(\$m,\$l,\$t)=m,^ *(\d+) .+/local/cms/([\w\-]+?)/(\w+)/\w+\.ini,}elsif(m,\w+/moses,){(\$m,\$t,\$l)=m,^ *(\d+) (?:/usr/local/bin/)?(sh|perl) -.+(fy\d\d_[\w\-]+)(?:_moses| -),}elsif(m,\w+/java,){(\$m,\$t)=m,^ *(\d+) .+?/(perl|java),;\$l=\"fy13_EN-JP_*\"};\$m=int(\$m/1024);\$m=\" \".\$m while length \$m<4;print\"\$l\tmtprd06\t\$t\t\${m}MB\n\"if(/\d+ moses /||m,\w+/(moses|java),)'"
ssh -n mtprd07         "ps -eo vsz,args |perl -ne 'my(\$m,\$l,\$t);if(/\d+ moses /){(\$m,\$l,\$t)=m,^ *(\d+) .+/local/cms/([\w\-]+?)/(\w+)/\w+\.ini,}elsif(m,\w+/moses,){(\$m,\$t,\$l)=m,^ *(\d+) (?:/usr/local/bin/)?(sh|perl) -.+(fy\d\d_[\w\-]+)(?:_moses| -),}elsif(m,\w+/java,){(\$m,\$t)=m,^ *(\d+) .+?/(perl|java),;\$l=\"fy13_EN-JP_*\"};\$m=int(\$m/1024);\$m=\" \".\$m while length \$m<4;print\"\$l\tmtprd07\t\$t\t\${m}MB\n\"if(/\d+ moses /||m,\w+/(moses|java),)'"
ssh -n mtprd08         "ps -eo vsz,args |perl -ne 'my(\$m,\$l,\$t);if(/\d+ moses /){(\$m,\$l,\$t)=m,^ *(\d+) .+/local/cms/([\w\-]+?)/(\w+)/\w+\.ini,}elsif(m,\w+/moses,){(\$m,\$t,\$l)=m,^ *(\d+) (?:/usr/local/bin/)?(sh|perl) -.+(fy\d\d_[\w\-]+)(?:_moses| -),}elsif(m,\w+/java,){(\$m,\$t)=m,^ *(\d+) .+?/(perl|java),;\$l=\"fy13_EN-JP_*\"};\$m=int(\$m/1024);\$m=\" \".\$m while length \$m<4;print\"\$l\tmtprd08\t\$t\t\${m}MB\n\"if(/\d+ moses /||m,\w+/(moses|java),)'"
ssh -n mtprd09         "ps -eo vsz,args |perl -ne 'my(\$m,\$l,\$t);if(/\d+ moses /){(\$m,\$l,\$t)=m,^ *(\d+) .+/local/cms/([\w\-]+?)/(\w+)/\w+\.ini,}elsif(m,\w+/moses,){(\$m,\$t,\$l)=m,^ *(\d+) (?:/usr/local/bin/)?(sh|perl) -.+(fy\d\d_[\w\-]+)(?:_moses| -),}elsif(m,\w+/java,){(\$m,\$t)=m,^ *(\d+) .+?/(perl|java),;\$l=\"fy13_EN-JP_*\"};\$m=int(\$m/1024);\$m=\" \".\$m while length \$m<4;print\"\$l\tmtprd09\t\$t\t\${m}MB\n\"if(/\d+ moses /||m,\w+/(moses|java),)'"
ssh -n mtprd10         "ps -eo vsz,args |perl -ne 'my(\$m,\$l,\$t);if(/\d+ moses /){(\$m,\$l,\$t)=m,^ *(\d+) .+/local/cms/([\w\-]+?)/(\w+)/\w+\.ini,}elsif(m,\w+/moses,){(\$m,\$t,\$l)=m,^ *(\d+) (?:/usr/local/bin/)?(sh|perl) -.+(fy\d\d_[\w\-]+)(?:_moses| -),}elsif(m,\w+/java,){(\$m,\$t)=m,^ *(\d+) .+?/(perl|java),;\$l=\"fy13_EN-JP_*\"};\$m=int(\$m/1024);\$m=\" \".\$m while length \$m<4;print\"\$l\tmtprd10\t\$t\t\${m}MB\n\"if(/\d+ moses /||m,\w+/(moses|java),)'"
ssh -n mtprd11         "ps -eo vsz,args |perl -ne 'my(\$m,\$l,\$t);if(/\d+ moses /){(\$m,\$l,\$t)=m,^ *(\d+) .+/local/cms/([\w\-]+?)/(\w+)/\w+\.ini,}elsif(m,\w+/moses,){(\$m,\$t,\$l)=m,^ *(\d+) (?:/usr/local/bin/)?(sh|perl) -.+(fy\d\d_[\w\-]+)(?:_moses| -),}elsif(m,\w+/java,){(\$m,\$t)=m,^ *(\d+) .+?/(perl|java),;\$l=\"fy13_EN-JP_*\"};\$m=int(\$m/1024);\$m=\" \".\$m while length \$m<4;print\"\$l\tmtprd11\t\$t\t\${m}MB\n\"if(/\d+ moses /||m,\w+/(moses|java),)'"
ssh -n mtprd12         "ps -eo vsz,args |perl -ne 'my(\$m,\$l,\$t);if(/\d+ moses /){(\$m,\$l,\$t)=m,^ *(\d+) .+/local/cms/([\w\-]+?)/(\w+)/\w+\.ini,}elsif(m,\w+/moses,){(\$m,\$t,\$l)=m,^ *(\d+) (?:/usr/local/bin/)?(sh|perl) -.+(fy\d\d_[\w\-]+)(?:_moses| -),}elsif(m,\w+/java,){(\$m,\$t)=m,^ *(\d+) .+?/(perl|java),;\$l=\"fy13_EN-JP_*\"};\$m=int(\$m/1024);\$m=\" \".\$m while length \$m<4;print\"\$l\tmtprd12\t\$t\t\${m}MB\n\"if(/\d+ moses /||m,\w+/(moses|java),)'"
ssh -n ussclpdapcmsl01 "ps -eo vsz,args |perl -ne 'my(\$m,\$l,\$t);if(/\d+ moses /){(\$m,\$l,\$t)=m,^ *(\d+) .+/local/cms/([\w\-]+?)/(\w+)/\w+\.ini,}elsif(m,\w+/moses,){(\$m,\$t,\$l)=m,^ *(\d+) (?:/usr/local/bin/)?(sh|perl) -.+(fy\d\d_[\w\-]+)(?:_moses| -),}elsif(m,\w+/java,){(\$m,\$t)=m,^ *(\d+) .+?/(perl|java),;\$l=\"fy13_EN-JP_*\"};\$m=int(\$m/1024);\$m=\" \".\$m while length \$m<4;print\"\$l\tussclpdapcmsl01\t\$t\t\${m}MB\n\"if(/\d+ moses /||m,\w+/(moses|java),)'"
ssh -n ussclpdapcmsl02 "ps -eo vsz,args |perl -ne 'my(\$m,\$l,\$t);if(/\d+ moses /){(\$m,\$l,\$t)=m,^ *(\d+) .+/local/cms/([\w\-]+?)/(\w+)/\w+\.ini,}elsif(m,\w+/moses,){(\$m,\$t,\$l)=m,^ *(\d+) (?:/usr/local/bin/)?(sh|perl) -.+(fy\d\d_[\w\-]+)(?:_moses| -),}elsif(m,\w+/java,){(\$m,\$t)=m,^ *(\d+) .+?/(perl|java),;\$l=\"fy13_EN-JP_*\"};\$m=int(\$m/1024);\$m=\" \".\$m while length \$m<4;print\"\$l\tussclpdapcmsl02\t\$t\t\${m}MB\n\"if(/\d+ moses /||m,\w+/(moses|java),)'"
ssh -n ussclpdapcmsl03 "ps -eo vsz,args |perl -ne 'my(\$m,\$l,\$t);if(/\d+ moses /){(\$m,\$l,\$t)=m,^ *(\d+) .+/local/cms/([\w\-]+?)/(\w+)/\w+\.ini,}elsif(m,\w+/moses,){(\$m,\$t,\$l)=m,^ *(\d+) (?:/usr/local/bin/)?(sh|perl) -.+(fy\d\d_[\w\-]+)(?:_moses| -),}elsif(m,\w+/java,){(\$m,\$t)=m,^ *(\d+) .+?/(perl|java),;\$l=\"fy13_EN-JP_*\"};\$m=int(\$m/1024);\$m=\" \".\$m while length \$m<4;print\"\$l\tussclpdapcmsl03\t\$t\t\${m}MB\n\"if(/\d+ moses /||m,\w+/(moses|java),)'"
ssh -n ussclpdapcmsl04 "ps -eo vsz,args |perl -ne 'my(\$m,\$l,\$t);if(/\d+ moses /){(\$m,\$l,\$t)=m,^ *(\d+) .+/local/cms/([\w\-]+?)/(\w+)/\w+\.ini,}elsif(m,\w+/moses,){(\$m,\$t,\$l)=m,^ *(\d+) (?:/usr/local/bin/)?(sh|perl) -.+(fy\d\d_[\w\-]+)(?:_moses| -),}elsif(m,\w+/java,){(\$m,\$t)=m,^ *(\d+) .+?/(perl|java),;\$l=\"fy13_EN-JP_*\"};\$m=int(\$m/1024);\$m=\" \".\$m while length \$m<4;print\"\$l\tussclpdapcmsl04\t\$t\t\${m}MB\n\"if(/\d+ moses /||m,\w+/(moses|java),)'"
ssh -n ussclpdapcmsl05 "ps -eo vsz,args |perl -ne 'my(\$m,\$l,\$t);if(/\d+ moses /){(\$m,\$l,\$t)=m,^ *(\d+) .+/local/cms/([\w\-]+?)/(\w+)/\w+\.ini,}elsif(m,\w+/moses,){(\$m,\$t,\$l)=m,^ *(\d+) (?:/usr/local/bin/)?(sh|perl) -.+(fy\d\d_[\w\-]+)(?:_moses| -),}elsif(m,\w+/java,){(\$m,\$t)=m,^ *(\d+) .+?/(perl|java),;\$l=\"fy13_EN-JP_*\"};\$m=int(\$m/1024);\$m=\" \".\$m while length \$m<4;print\"\$l\tussclpdapcmsl05\t\$t\t\${m}MB\n\"if(/\d+ moses /||m,\w+/(moses|java),)'"
ssh -n ussclpdapcmsl06 "ps -eo vsz,args |perl -ne 'my(\$m,\$l,\$t);if(/\d+ moses /){(\$m,\$l,\$t)=m,^ *(\d+) .+/local/cms/([\w\-]+?)/(\w+)/\w+\.ini,}elsif(m,\w+/moses,){(\$m,\$t,\$l)=m,^ *(\d+) (?:/usr/local/bin/)?(sh|perl) -.+(fy\d\d_[\w\-]+)(?:_moses| -),}elsif(m,\w+/java,){(\$m,\$t)=m,^ *(\d+) .+?/(perl|java),;\$l=\"fy13_EN-JP_*\"};\$m=int(\$m/1024);\$m=\" \".\$m while length \$m<4;print\"\$l\tussclpdapcmsl06\t\$t\t\${m}MB\n\"if(/\d+ moses /||m,\w+/(moses|java),)'"
ssh -n ussclpdapcmsl07 "ps -eo vsz,args |perl -ne 'my(\$m,\$l,\$t);if(/\d+ moses /){(\$m,\$l,\$t)=m,^ *(\d+) .+/local/cms/([\w\-]+?)/(\w+)/\w+\.ini,}elsif(m,\w+/moses,){(\$m,\$t,\$l)=m,^ *(\d+) (?:/usr/local/bin/)?(sh|perl) -.+(fy\d\d_[\w\-]+)(?:_moses| -),}elsif(m,\w+/java,){(\$m,\$t)=m,^ *(\d+) .+?/(perl|java),;\$l=\"fy13_EN-JP_*\"};\$m=int(\$m/1024);\$m=\" \".\$m while length \$m<4;print\"\$l\tussclpdapcmsl07\t\$t\t\${m}MB\n\"if(/\d+ moses /||m,\w+/(moses|java),)'"
ssh -n ussclpdapcmsl08 "ps -eo vsz,args |perl -ne 'my(\$m,\$l,\$t);if(/\d+ moses /){(\$m,\$l,\$t)=m,^ *(\d+) .+/local/cms/([\w\-]+?)/(\w+)/\w+\.ini,}elsif(m,\w+/moses,){(\$m,\$t,\$l)=m,^ *(\d+) (?:/usr/local/bin/)?(sh|perl) -.+(fy\d\d_[\w\-]+)(?:_moses| -),}elsif(m,\w+/java,){(\$m,\$t)=m,^ *(\d+) .+?/(perl|java),;\$l=\"fy13_EN-JP_*\"};\$m=int(\$m/1024);\$m=\" \".\$m while length \$m<4;print\"\$l\tussclpdapcmsl08\t\$t\t\${m}MB\n\"if(/\d+ moses /||m,\w+/(moses|java),)'"
ssh -n ussclpdapcmsl09 "ps -eo vsz,args |perl -ne 'my(\$m,\$l,\$t);if(/\d+ moses /){(\$m,\$l,\$t)=m,^ *(\d+) .+/local/cms/([\w\-]+?)/(\w+)/\w+\.ini,}elsif(m,\w+/moses,){(\$m,\$t,\$l)=m,^ *(\d+) (?:/usr/local/bin/)?(sh|perl) -.+(fy\d\d_[\w\-]+)(?:_moses| -),}elsif(m,\w+/java,){(\$m,\$t)=m,^ *(\d+) .+?/(perl|java),;\$l=\"fy13_EN-JP_*\"};\$m=int(\$m/1024);\$m=\" \".\$m while length \$m<4;print\"\$l\tussclpdapcmsl09\t\$t\t\${m}MB\n\"if(/\d+ moses /||m,\w+/(moses|java),)'"
ssh -n ussclpdapcmsl10 "ps -eo vsz,args |perl -ne 'my(\$m,\$l,\$t);if(/\d+ moses /){(\$m,\$l,\$t)=m,^ *(\d+) .+/local/cms/([\w\-]+?)/(\w+)/\w+\.ini,}elsif(m,\w+/moses,){(\$m,\$t,\$l)=m,^ *(\d+) (?:/usr/local/bin/)?(sh|perl) -.+(fy\d\d_[\w\-]+)(?:_moses| -),}elsif(m,\w+/java,){(\$m,\$t)=m,^ *(\d+) .+?/(perl|java),;\$l=\"fy13_EN-JP_*\"};\$m=int(\$m/1024);\$m=\" \".\$m while length \$m<4;print\"\$l\tussclpdapcmsl10\t\$t\t\${m}MB\n\"if(/\d+ moses /||m,\w+/(moses|java),)'"
ssh -n ussclpdapcmsl11 "ps -eo vsz,args |perl -ne 'my(\$m,\$l,\$t);if(/\d+ moses /){(\$m,\$l,\$t)=m,^ *(\d+) .+/local/cms/([\w\-]+?)/(\w+)/\w+\.ini,}elsif(m,\w+/moses,){(\$m,\$t,\$l)=m,^ *(\d+) (?:/usr/local/bin/)?(sh|perl) -.+(fy\d\d_[\w\-]+)(?:_moses| -),}elsif(m,\w+/java,){(\$m,\$t)=m,^ *(\d+) .+?/(perl|java),;\$l=\"fy13_EN-JP_*\"};\$m=int(\$m/1024);\$m=\" \".\$m while length \$m<4;print\"\$l\tussclpdapcmsl11\t\$t\t\${m}MB\n\"if(/\d+ moses /||m,\w+/(moses|java),)'"
ssh -n ussclpdapcmsl12 "ps -eo vsz,args |perl -ne 'my(\$m,\$l,\$t);if(/\d+ moses /){(\$m,\$l,\$t)=m,^ *(\d+) .+/local/cms/([\w\-]+?)/(\w+)/\w+\.ini,}elsif(m,\w+/moses,){(\$m,\$t,\$l)=m,^ *(\d+) (?:/usr/local/bin/)?(sh|perl) -.+(fy\d\d_[\w\-]+)(?:_moses| -),}elsif(m,\w+/java,){(\$m,\$t)=m,^ *(\d+) .+?/(perl|java),;\$l=\"fy13_EN-JP_*\"};\$m=int(\$m/1024);\$m=\" \".\$m while length \$m<4;print\"\$l\tussclpdapcmsl12\t\$t\t\${m}MB\n\"if(/\d+ moses /||m,\w+/(moses|java),)'"
ssh -n neucmslinux     "ps -eo vsz,args |perl -ne 'my(\$m,\$l,\$t);if(/\d+ moses /){(\$m,\$l,\$t)=m,^ *(\d+) .+/local/cms/([\w\-]+?)/(\w+)/\w+\.ini,}elsif(m,\w+/moses,){(\$m,\$t,\$l)=m,^ *(\d+) (?:/usr/local/bin/)?(sh|perl) -.+(fy\d\d_[\w\-]+)(?:_moses| -),}elsif(m,\w+/java,){(\$m,\$t)=m,^ *(\d+) .+?/(perl|java),;\$l=\"fy13_EN-JP_*\"};\$m=int(\$m/1024);\$m=\" \".\$m while length \$m<4;print\"\$l\tneucmslinux\t\$t\t\${m}MB\n\"if(/\d+ moses /||m,\w+/(moses|java),)'"
ssh -n ussclsdcmslnx01 "ps -eo vsz,args |perl -ne 'my(\$m,\$l,\$t);if(/\d+ moses /){(\$m,\$l,\$t)=m,^ *(\d+) .+/local/cms/([\w\-]+?)/(\w+)/\w+\.ini,}elsif(m,\w+/moses,){(\$m,\$t,\$l)=m,^ *(\d+) (?:/usr/local/bin/)?(sh|perl) -.+(fy\d\d_[\w\-]+)(?:_moses| -),}elsif(m,\w+/java,){(\$m,\$t)=m,^ *(\d+) .+?/(perl|java),;\$l=\"fy13_EN-JP_*\"};\$m=int(\$m/1024);\$m=\" \".\$m while length \$m<4;print\"\$l\tneucmslinux\t\$t\t\${m}MB\n\"if(/\d+ moses /||m,\w+/(moses|java),)'"
